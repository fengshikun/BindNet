{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal"
        },
        {
            "name": "Python: train complex pretrain",
            "type": "python",
            "request": "launch",
            "module": "torch.distributed.launch",
            // "program": "unicore_train.py",
            "cwd": "/mnt/nfs-ssd/data/fengshikun/FeatExp/BindNet/",
            "console": "integratedTerminal",
            "justMyCode": false,
            "args": [
                "--nproc_per_node",
                "1",
                "--master_port",
                "10010",
                "unicore_train.py",
                "/mnt/nfs-ssd/data/fengshikun/FeatExp/BindNet",
                "--user-dir",
                "./unimol",
                "--train-subset",
                "train",
                "--valid-subset",
                "valid,test",
                "--num-workers",
                "0",
                "--ddp-backend",
                "c10d",
                "--mode",
                "train",
                "--task",
                "affinity_regres",
                "--loss",
                "affinity_regres",
                "--arch",
                "affinity_regres",
                "--task-name",
                "LBA_affinity",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.99)",
                "--adam-eps",
                "1e-6",
                "--clip-norm",
                "1.0",
                "--weight-decay",
                "1e-4",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "0.0001",
                "--warmup-updates",
                "100",
                "--total-num-update",
                "5000",
                "--update-freq",
                "1",
                "--seed",
                "1",
                "--tensorboard-logdir",
                "./results/LBA30_frad_pretrained_1_lr0.0001_bz8_crnetFreeze0_seed1/tsb",
                "--max-update",
                "5000",
                "--log-interval",
                "10",
                "--log-format",
                "simple",
                "--save-interval-updates",
                "100000000",
                "--validate-interval-updates",
                "100",
                "--keep-interval-updates",
                "1",
                "--no-epoch-checkpoints",
                "--x-norm-loss",
                "0.01",
                "--delta-pair-repr-norm-loss",
                "-1",
                "--mask-prob",
                "0.15",
                "--noise-type",
                "uniform",
                "--noise",
                "1.0",
                "--batch-size",
                "1",
                "--save-dir",
                "./results/LBA30_frad_pretrained_1_lr0.0001_bz8_crnetFreeze0_seed1/",
                "--only-polar",
                "0",
                "--run-name",
                "LBA30_frad_pretrained_1_lr0.0001_bz8_crnetFreeze0_seed1",
                "--dict-name",
                "dict_protein.txt",
                "--ligdict-name",
                "dict_ligand.txt",
                "--net",
                "complex_crnet",
                "--recycling",
                "1",
                "--CLS-use",
                "seperate_CLS",
                "--lig-pretrained",
                "/mnt/nfs-ssd/data/moyuanhuan/BindNetData/mol_pre_no_h_220816.pt",
                "--proc-pretrained",
                "/mnt/nfs-ssd/data/moyuanhuan/BindNetData/pocket_pre_220816.pt",
                "--complex-pretrained-model",
                "/mnt/nfs-ssd/data/moyuanhuan/BindNetData/checkpoint_44_270000.pt",
                "--proc-freeze",
                "1",
                "--ligand-freeze",
                "1",
                "--keep-best-checkpoints",
                "1",
                "--best-checkpoint-metric",
                "valid_pearson",
                "--maximize-best-checkpoint-metric",
                "--LBA_data",
                // "/mnt/nfs-ssd/data/fengshikun/FeatExp/BindNet/5j9y_data_df.pkl",
                "/mnt/nfs-ssd/data/moyuanhuan/DiffDockData/diffDock_dataset_matching/valid_cache/protein_ligand_df.pkl",
                "--no-last-checkpoints",
                "--patience",
                "5",
                "--freeze-pretrained-transformer",
                "0",
                "--tmp-save-dir",
                "./new_pretrain_tmp/",
                "--extract-feat",
                "1",
                "--extract-pairwise-feat",
                "1",
                "--save-path",
                "./valid_pairwise_embedding"
            ],
            "env": {
                "CUDA_VISIBLE_DEVICES": "4",
                // "TORCH_DISTRIBUTED_DEBUG": "DETAIL"
                // export LD_LIBRARY_PATH=/usr/local/cuda/lib64:/data/protein/SKData/miniconda3/envs/MOLuni/lib:$LD_LIBRARY_PATH
            },
        }
    ]
}